(()=>{var i=document.getElementById("ca"),I="#ebebe1";document.body.style.backgroundColor=I;var w="./img3.jpg",v=Math.min(window.devicePixelRatio,2),l=new Worker("./worker.js"),n=document.getElementById("controls"),t=document.getElementById("userimage"),m=document.getElementById("userimageform"),g=document.getElementById("resolution"),d=null,E=a=>window.innerWidth<window.innerHeight?window.innerWidth*a:window.innerHeight*a,p=(a,e,r,s)=>{a.style.width=e/s+"px",a.style.height=r/s+"px"},o=a=>{var e=E(v),r=e,s=Number(g.value);p(i,e,r,v),l.postMessage({message:"processFirstFrame",image:a,canvasWidth:e,canvasHeight:r,resolution:s})},h=a=>{createImageBitmap(a).then(e=>{d=e,o(e)})},u=a=>{var e=new Image;e.src=a,e.addEventListener("load",h.bind(null,e),{once:!0})},c=a=>{var e=new FileReader;e.readAsDataURL(a),e.onload=r=>{u(r.target.result)}},L=()=>{var a=new FormData(m),e=a.get("userimage");return!e||e.name===""?null:e};m.addEventListener("submit",()=>{var a=L();a&&c(a),n.classList.remove("dragover")});g.addEventListener("change",()=>{o(d)});window.addEventListener("resize",()=>{o(d)});n.addEventListener("dragover",()=>{n.classList.add("dragover")});n.addEventListener("dragleave",()=>{n.classList.remove("dragover")});t.addEventListener("dragover",()=>{t.classList.add("dragover")});t.addEventListener("dragleave",()=>{t.classList.remove("dragover")});t.addEventListener("drop",()=>{t.classList.remove("dragover")});var f=()=>{var a=i.transferControlToOffscreen();l.postMessage({message:"initCanvas",canvas:a},[a]);var e=L();e?c(e):u(w)};f();})();
//# sourceMappingURL=script.js.map
